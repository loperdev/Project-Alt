{%- capture gallery -%}
{%- liquid 
    assign section_st = section.settings
    assign page_width = settings.cntwd | append: 'px'
    if section_st.sw
        assign page_width = '100vw'
    endif
-%}
{%- capture icon -%}						
    {% if section_st.icony %}
		{% if section_st.icon == '1' %}
		    <svg class="at-icon anim gicon{{ section_st.icon }} m_auto mb20" style="--icns:24px;--icns_cl:{{ section_st.iconcl }}" viewBox="0 0 426.66667 426.66667" xmlns="http://www.w3.org/2000/svg"><path d="m405.332031 192h-170.664062v-170.667969c0-11.773437-9.558594-21.332031-21.335938-21.332031-11.773437 0-21.332031 9.558594-21.332031 21.332031v170.667969h-170.667969c-11.773437 0-21.332031 9.558594-21.332031 21.332031 0 11.777344 9.558594 21.335938 21.332031 21.335938h170.667969v170.664062c0 11.777344 9.558594 21.335938 21.332031 21.335938 11.777344 0 21.335938-9.558594 21.335938-21.335938v-170.664062h170.664062c11.777344 0 21.335938-9.558594 21.335938-21.335938 0-11.773437-9.558594-21.332031-21.335938-21.332031zm0 0"/></svg>
		{% elsif section_st.icon == '2' %}
    		<svg class="at-icon anim gicon{{ section_st.icon }} m_auto mb20" style="--icns:24px;--icns_cl:{{ section_st.iconcl }}" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" ><path d="m181.2 32a32 32 0 0 1 -32 32h-85.2v85.2a32 32 0 0 1 -64 0v-117.2a32 32 0 0 1 32-32h117.2a32 32 0 0 1 32 32zm-32 416h-85.2v-85.2a32 32 0 0 0 -64 0v117.2a32 32 0 0 0 32 32h117.2a32 32 0 1 0 0-64zm330.8-117.2a32 32 0 0 0 -32 32v85.2h-85.2a32 32 0 1 0 0 64h117.2a32 32 0 0 0 32-32v-117.2a32 32 0 0 0 -32-32zm0-330.8h-117.2a32 32 0 0 0 0 64h85.2v85.2a32 32 0 1 0 64 0v-117.2a32 32 0 0 0 -32-32z"/></svg>
		{% else %}
    		<svg class="at-icon anim gicon{{ section_st.icon }} m_auto mb20" style="--icns:24px;--icns_cl:{{ section_st.iconcl }}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path d="M252.9,234.1l-53.4-53.4c-3.1-3.1-7.5-4.3-11.5-3.4c16.3-18.7,26.2-43.2,26.2-69.9c0-58.9-47.9-106.8-106.8-106.8 S0.6,48.5,0.6,107.3s47.9,106.8,106.8,106.8c27.1,0,51.9-10.2,70.8-26.9c-0.8,4,0.4,8.3,3.5,11.4L235,252c2.5,2.5,5.7,3.7,8.9,3.7 c3.2,0,6.5-1.2,8.9-3.7C257.8,247.1,257.8,239.1,252.9,234.1z M107.3,193.9c-47.7,0-86.6-38.8-86.6-86.6s38.8-86.6,86.6-86.6 s86.6,38.8,86.6,86.6S155.1,193.9,107.3,193.9z"/></svg> 
		{% endif %}
    {% endif %}
{%- endcapture -%}

<div class="sec_cov{% if section_st.hidem %} hide-sm{% endif %}{% if section_st.hided %} hide-md hide-lg{% endif %}" style="--sbg:{% if section_st.bgg != blank %}{{ section_st.bgg }}{% else %}{{ section_st.bg }}{% endif %};--sst:{{ section_st.sst }}px;--ssb:{{ section_st.ssb }}px;--sstm:{{ section_st.sstm }}px;--ssbm:{{ section_st.ssbm }}px" id="{{ section.id }}"> 	    
        <div class="sn{{ section.id }}{% if section_st.sw %} fw-sec{% else %} page-width{% endif %}">     			
            {% render 'sec-title' %}
            <grid-masonary class="grid-masonary fl f-wrap gspace atgallery{{ section_st.style }}" style="--grsp:{{ section_st.gspace | divided_by: 2.0 }}px;--grspm:{{ section_st.gspacem | divided_by: 2.0 }}px;--rounded:{{ section_st.radius }}px;--cl:{{ section_st.cl }};--imgbg:rgba({{ section_st.imgbg | color_to_rgb | replace:"rgb(","" | replace:")","" }},{{ section_st.ttl_opa }});--txtbg:{{ section_st.txtbg }};--bbdr:{{ section_st.txtbg | color_darken:5 }};">
                <div class="grid-sizer col-{{ section_st.col }} pa"></div>
                {% for block in section.blocks limit: section.blocks.size %}
				    {% assign blk_st = block.settings %}
                    {%- capture sizes -%}
                        {%- if blk_st.width == 'wd20' -%}
                            (min-width:1024px) calc(({{ page_width }} - {{ section_st.gspace | times:4 }}px) / 5),(min-width:768px) calc((100vw - {{ section_st.gspace | times:4 }}px) / 5), calc(100vw - 15px)
                        {%- elsif blk_st.width == 'wd25' -%}
                            (min-width:1024px) calc(({{ page_width }} - {{ section_st.gspace | times:3 }}px) / 4),(min-width:768px) calc((100vw - {{ section_st.gspace | times:3 }}px) / 4), calc(100vw - 15px)
                        {%- elsif blk_st.width == 'wd33' -%}
                            (min-width:1024px) calc(({{ page_width }} - {{ section_st.gspace | times:2 }}px) / 3),(min-width:768px) calc((100vw - {{ section_st.gspace | times:2 }}px) / 3), calc(100vw - 15px)
                        {%- elsif blk_st.width == 'wd50' -%}
                          (min-width:1024px) calc(({{ page_width }} - {{ section_st.gspace }}px) / 2),(min-width:768px) calc((100vw - {{ section_st.gspace }}px) / 2), calc(100vw - 15px)
                        {%- elsif blk_st.width == 'wd66' -%}
                          (min-width:1024px) calc(({{ page_width }} - {{ section_st.gspace }}px) / 3 * 2),(min-width:768px) calc(({{ page_width }} - {{ section_st.gspace }}px) / 3 * 2), calc(100vw - 15px)
                        {%- elsif blk_st.width == 'wd75' -%}
                          (min-width:1024px) calc(({{ page_width }} - {{ section_st.gspace }}px) / 5 * 3),(min-width:768px) calc(({{ page_width }} - {{ section_st.gspace }}px) / 5 * 3), calc(100vw - 15px)
                        {%- elsif blk_st.width == 'w_100' -%}
                          (min-width:1024px) {{ page_width }}, 100vw
                        {%- endif -%}
                    {%- endcapture -%}
					{%- capture text -%}						
							<span class="db anim rgTxt" style="--fs:{{ section_st.fs }}px;--fsm:{{ section_st.fsm }}px;--fw:{{ section_st.fw }};--lh:{{ section_st.lh }};">{{ blk_st.title }}</span>
							<span class="db anim rgTxt mt5" style="--fs:{{ section_st.tfs }}px;--fsm:{{ section_st.tfsm }}px;--fw:{{ section_st.tfw }};--lh:{{ section_st.tlh }};">{{ blk_st.txt }}</span>
					{%- endcapture -%}									                
                    <div class="msitem gitem {{ blk_st.width }}-md {% render 'animate-data', css:true %}" {% render 'animate-data' %} {{ block.shopify_attributes }}>
                        <div class="gallery_wrap of_hidden brad" >							
                            <a {% if section_st.imgclick == '1' %}class="zoom pr db ltbx"{% endif %}  href="{% if section_st.imgclick == '1' %}{{ blk_st.image | image_url: width: blk_st.image.width }}{% else %}{{ blk_st.imgurl }}{% endif %}" data-pswp-width="{{ blk_st.image.width }}" data-pswp-height="{{ blk_st.image.height }}">
                                {% if blk_st.image!= blank %}
                                    {{ blk_st.image | image_url: width: blk_st.image.width | image_tag: loading:'lazy', width:blk_st.image.width, height:blk_st.image.height, class:'imgAt m_auto', sizes:sizes, widths:"180,320,460,600,800,1000,1200,1400,1600,2000" }}
                                {% else %} 
                                    {% capture current %}{% cycle 1, 2, 3, 4 %}{% endcapture %}{{ 'collection-apparel-' | append: current | placeholder_svg_tag: 'placeholder-svg' }}    
                                {% endif %}
                                 {% if section_st.style == '3' %}<div class="gallery_text fl f-jcc f-col all0 pa anim">{{ icon }}</div>{% endif %}
								
								{% if section_st.style == '1' or section_st.style == '2' %}
								    <div class="gallery_text fl f-col all0 pa anim{% if section_st.style == '1' %} f-jcc tc{% else %} f-jce tl pd30{% endif %}">
                                        {{ icon }}
                                        {% if blk_st.title != blank or blk_st.txt != blank %}<div class="fl f-col">{{ text }}</div>{% endif %}
								    </div>
								{% endif %}							  
                            </a>
							{% if section_st.style == '3' %}
								{% if blk_st.title != blank or blk_st.txt != blank %}<div class="gallery_text tc pr pd20">{{ text }}</div>{% endif %}
							{% endif %}                            															
                        </div>
                    </div>        
                {% endfor %}
            </grid-masonary>
        </div>  
</div>
<link href="{{ 'photoswipe.css' | asset_url }}" rel="stylesheet" media="print" onload="this.media='all'">
<script type="module">
    import PhotoSwipeLightbox from '{{ 'photoswipe-lightbox.min.js' | asset_url }}';
    const lightbox = new PhotoSwipeLightbox({
        gallery: '.atgallery{{ section_st.style }}',
        children: 'a.ltbx',
        pswpModule: () => import('{{ 'photoswipe.min.js' | asset_url }}')
    });
    lightbox.init();
</script>
{%- endcapture -%}
{{ gallery | strip_newlines | remove: '  ' | remove: '	' }}

{% schema %}
{
    "name": "Image Gallery",
    "class":"index-section",
     "disabled_on": {
    "groups": ["header", "footer", "custom.overlay"]
    },
    "max_blocks":50,
    "settings": [
        {
            "type": "text",
            "id": "title",
            "label": "Heading",
            "default": "Image Gallery"
        },
        {
            "type": "textarea",
            "id": "subtitle",
            "label": "Sub Heading",
            "default": "Describe your products, collection etc..."
        },        
        {
            "type": "header",
            "content": "Grid Design ==="
        },
        {
            "type": "range",
            "id": "gspace",
            "label": "Grid gap",
            "default": 30,
            "min": 0,
            "max": 50,
            "step": 1,
            "unit":"px"           
        },
        {
            "type": "range",
            "id": "gspacem",
            "label": "Grid gap (mobile)",
            "default": 15,
            "min": 0,
            "max": 30,
            "step": 1,
            "unit":"px"
        },
        {
            "type": "range",
            "id": "col",
            "label": "Grid columns",
            "default": 3,
            "min": 2,
            "max": 5,
            "step": 1,
            "info":"[Column Selection guide](https://www.adornthemes.com/masonry-column-selection/)"
        },
      {
            "type": "header",
            "content": "Gallery Design ==="
        },
		 {
            "type": "select",
            "id": "style",
            "label": "Gallery Style",
            "default": "1",
            "options": [
                {
                    "value": "1",
                    "label": "Style 1"
                },
                {
                    "value": "2",
                    "label": "Style 2"
                },
                {
                    "value": "3",
                    "label": "Style 3"
                }
            ]
        },
      {
            "type": "select",
            "id": "imgclick",
            "label": "On Click",
            "default": "1",
            "options": [
                {
                    "value": "1",
                    "label": "Open Lightbox Popup"
                },
                {
                    "value": "2",
                    "label": "Redirect to Url"
                }               
            ]
        },		
		{
            "type":"checkbox",
            "id":"icony",
            "label":"Show image hover icon?",
            "default":true
        },
		 {
            "type": "select",
            "id": "icon",
            "label": "Icon",
            "default": "1",
            "options": [
                {
                    "value": "1",
                    "label": "Icon 1"
                },
                {
                    "value": "2",
                    "label": "Icon 2"
                },
                {
                    "value": "3",
                    "label": "Icon 3"
                }
            ],
            
        },		
 		{
            "type":"color",
            "id":"iconcl",
            "label":"Icon",
            "default":"#111",
            
        },  
      {
        "type": "paragraph",
        "content": "Text 1 ===="
      },
      {
                    "type": "range",
                    "id": "fs",
                    "label": "Font size",
                    "default": 15,
                    "min": 10,
                    "max": 100,
                    "step": 1,
                    "unit": "px"
                }, 
                {
                    "type": "range",
                    "id": "fsm",
                    "label": "Font size (mobile)",
                    "default": 15,
                    "min": 10,
                    "max": 30,
                    "step": 1,
                    "unit": "px"
                }, 
               {
                    "type": "select",
                    "id": "fw",
                    "label": "Font weight",
                    "default": "600",
                    "options": [
                        {
                            "value": "300",
                            "label": "Light"
                        },
                        {
                            "value": "400",
                            "label": "Regular"
                        },
                        {
                            "value": "500",
                            "label": "Medium"
                        },
                        {
                            "value": "600",
                            "label": "Semi Bold"
                        },
                        {
                            "value": "700",
                            "label": "Bold"
                        }
                    ]
                }, 	              
                {
                    "type": "range",
                    "id": "lh",
                    "label": "Line height",
                    "default": 1.5,
                    "min": 1.0,
                    "max": 2.0,
                    "step": 0.1              
                },
      {
        "type": "paragraph",
        "content": "Text 2 ===="
      },
      {
                    "type": "range",
                    "id": "tfs",
                    "label": "Font size",
                    "default": 13,
                    "min": 10,
                    "max": 100,
                    "step": 1,
                    "unit": "px"
                }, 
                {
                    "type": "range",
                    "id": "tfsm",
                    "label": "Font size (mobile)",
                    "default": 13,
                    "min": 10,
                    "max": 30,
                    "step": 1,
                    "unit": "px"
                }, 
               {
                    "type": "select",
                    "id": "tfw",
                    "label": "Font weight",
                    "default": "400",
                    "options": [
                        {
                            "value": "300",
                            "label": "Light"
                        },
                        {
                            "value": "400",
                            "label": "Regular"
                        },
                        {
                            "value": "500",
                            "label": "Medium"
                        },
                        {
                            "value": "600",
                            "label": "Semi Bold"
                        },
                        {
                            "value": "700",
                            "label": "Bold"
                        }
                    ]
                }, 	              
                {
                    "type": "range",
                    "id": "tlh",
                    "label": "Line height",
                    "default": 1.5,
                    "min": 1.0,
                    "max": 2.0,
                    "step": 0.1              
                },
       {
            "type":"color",
            "id":"cl",
            "label":"Text Color",
            "default":"#111"
        },
		{
            "type":"color",
            "id":"txtbg",
            "label":"Text Background",
            "default":"#fff"
        },
       {
            "type":"color",
            "id":"imgbg",
            "label":"Image Overlay",
            "default":"#fff"
        },
		 {
            "type": "range",
            "id": "ttl_opa",
            "min": 0,
            "max": 1,
            "step": 0.1,
            "label": "Overlay Opacity",
            "unit": "%",
            "default": 0.7
        },
        {
            "type": "range",
            "id": "radius",
            "label": "Image Rounded",
            "default": 0,
            "min": 0,
            "max": 20,
            "step": 1
        },
		{
            "type": "header",
            "content": "Section Design ==="
        },
       {
            "type":"checkbox",
            "id":"sw",
            "label":"Fullwidth?",
            "default": false           
        },	
          {
            "type":"checkbox",
            "id":"npd",
            "label":"No Padding?",
            "default": true,
            "info":"Remove left/right padding for fullwidth",
            
        },
        {
            "type": "color",
            "id": "bg",
            "label": "Background",
            "default":"#fff"	
        },
        {
            "type": "color_background",
            "id": "bgg",
            "label": "Gradient Background"
        },	       
       {
            "type": "color",
            "id": "headings_cl",
            "label": "Text"
        },
		{
			"type": "range",
			"id": "sst",
			"min": 0,
			"max": 100,
			"step": 5,
			"label": "Spacing Top",
			"unit": "px",
			"default":40
        },
		{
			"type": "range",
			"id": "ssb",
			"min": 0,
			"max": 100,
			"step": 5,
			"label": "Spacing Bottom",
			"unit": "px",
			"default":40
        },		
		{
			"type": "range",
			"id": "sstm",
			"min": 0,
			"max": 100,
			"step": 5,
			"label": "Spacing Top (mobile)",
			"unit": "px",
			"default":15
        },
		{
			"type": "range",
			"id": "ssbm",
			"min": 0,
			"max": 100,
			"step": 5,
			"label": "Spacing Bottom (mobile)",
			"unit": "px",
			"default":15
        },
         {
            "type": "checkbox",
            "id": "hidem",
            "label": "Hide on Mobile?",
            "default": false
        },
        {
            "type": "checkbox",
            "id": "hided",
            "label": "Hide on Desktop?",
            "default": false
        }	 
    ],
    "blocks":[
        {
            "name":"Image",
            "type":"lookbook1",
            "settings":[
                {
                    "type":"image_picker",
                    "id":"image",
                    "label":"Add Image"
                },               
                {
                    "type":"textarea",
                    "id":"title",
                    "label":"Text 1",
                    "default":"STREET STYLE"
                },
                {
                    "type":"textarea",
                    "id":"txt",
                    "label":"Text 2",
                    "default":"GREAT SUMMER CLEARANCE SALES"
                },
                {
                    "type":"url",
                    "id":"imgurl",
                    "label":"Url"                   
                },
                {
                    "type": "select",
                    "id": "width",
                    "label": "Column width",
                    "default": "wd33",
                    "info":"Total width of all block should be 100%",
                    "options": [
                        { "value": "wd20", "label": "20%" },
                        { "value": "wd25", "label": "25%" },
                        { "value": "wd33", "label": "33%" },
                        { "value": "wd40", "label": "40%" },
                        { "value": "wd50", "label": "50%" },
                        { "value": "wd60", "label": "60%" },
                        { "value": "wd66", "label": "66%" },
                        { "value": "wd75", "label": "75%" },
                        { "value": "wd80", "label": "80%" },
                        { "value": "w_100", "label": "100%" }
                    ]
                }
            ]
        }
    ],
    "presets": [
        {
            "name": "Image Gallery",
          "category": "Images",
            "blocks": [
                {
                    "type": "lookbook1"
                },
                {
                    "type": "lookbook1"
                },
               {
                    "type": "lookbook1"
                },
                {
                    "type": "lookbook1"
                },
                {
                    "type": "lookbook1"
                },
                {
                    "type": "lookbook1"
                }
            ]
        }
    ]
}
{% endschema %}
